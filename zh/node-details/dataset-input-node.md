# Dataset Input Node

Dataset Input Node æ˜¯ä¸“é—¨ç”¨äºä»å¤–éƒ¨æ•°æ®æºè¯»å–æ•°æ®çš„èŠ‚ç‚¹ï¼Œæ˜¯ Dataset Node çš„å®ä¾‹èŠ‚ç‚¹ã€‚èŠ‚ç‚¹æ”¯æŒä» Google Sheets è¯»å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®ä¼ é€’ç»™ä¸‹æ¸¸èŠ‚ç‚¹è¿›è¡Œå¤„ç†ã€‚

---

## èŠ‚ç‚¹ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **èŠ‚ç‚¹ç±»å‹** | `dataset_input_node` |
| **æ˜¾ç¤ºåç§°** | Dataset Input |
| **èŠ‚ç‚¹åˆ†ç±»** | Inputï¼ˆæ•°æ®è¾“å…¥ï¼‰ |
| **å›¾æ ‡** | ğŸ“¥ æ•°æ®åº“å›¾æ ‡ |
| **å¥æŸ„é¢œè‰²** | Emeraldï¼ˆç»¿è‰²ï¼‰ |
| **èŠ‚ç‚¹ç±»åˆ«** | Instance Nodeï¼ˆå®ä¾‹èŠ‚ç‚¹ï¼‰ |
| **åŸºç±»èŠ‚ç‚¹** | `dataset_node` |

---

## åŠŸèƒ½è¯´æ˜

Dataset Input Node ä» Google Sheets è¯»å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼ä¾›ä¸‹æ¸¸èŠ‚ç‚¹ä½¿ç”¨ã€‚èŠ‚ç‚¹è‡ªåŠ¨å¤„ç†è¡¨å¤´ã€æ•°æ®ç±»å‹è½¬æ¢å’Œæ ¼å¼åŒ–ã€‚

**ä¸»è¦ç”¨é€”ï¼š**
- ä» Google Sheets è¯»å–æ•°æ®
- å¯¼å…¥å†å²æ•°æ®ç”¨äºåˆ†æ
- åŠ è½½é…ç½®æ•°æ®
- è¯»å–äº¤æ˜“è®°å½•
- è·å–å¤–éƒ¨æ•°æ®é›†

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- ğŸ“Š **Google Sheets é›†æˆ**ï¼šç›´æ¥è¯»å– Google Sheets æ•°æ®
- ğŸ”„ **è‡ªåŠ¨æ ¼å¼åŒ–**ï¼šå°†è¡¨æ ¼æ•°æ®è½¬æ¢ä¸º JSON æ ¼å¼
- ğŸ“‹ **è¡¨å¤´æ”¯æŒ**ï¼šè‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†è¡¨å¤´è¡Œ
- ğŸ¯ **èŒƒå›´æŒ‡å®š**ï¼šæ”¯æŒè¯»å–ç‰¹å®šèŒƒå›´çš„æ•°æ®
- ğŸ”— **URL æ”¯æŒ**ï¼šæ”¯æŒå®Œæ•´ URL æˆ– Sheet ID

---

## ä¸ Dataset Node çš„å…³ç³»

Dataset Input Node æ˜¯ Dataset Node çš„**å®ä¾‹èŠ‚ç‚¹**ï¼Œä¸“é—¨ç”¨äºæ•°æ®è¯»å–ï¼š

```
DatasetNode (åŸºç±»)
    â””â”€ æ”¯æŒ read/write/append ä¸‰ç§æ¨¡å¼
        â†“ å®ä¾‹åŒ–ï¼ˆå¼ºåˆ¶ mode="read"ï¼‰
DatasetInputNode (å®ä¾‹)
    â””â”€ ä»…æ”¯æŒ read æ¨¡å¼ï¼Œç®€åŒ–å‚æ•°
```

---

## è¾“å…¥å‚æ•°

### å‚æ•°åˆ—è¡¨

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `doc_link` | text | âœ… | - | Google Sheets URL æˆ– ID |
| `worksheet_name` | text | âŒ | `Sheet1` | å·¥ä½œè¡¨åç§° |
| `range` | text | âŒ | `A1:Z1000` | æ•°æ®èŒƒå›´ |
| `header_row` | boolean | âŒ | `true` | æ˜¯å¦åŒ…å«è¡¨å¤´è¡Œ |

### doc_link å‚æ•°

**æ”¯æŒçš„æ ¼å¼ï¼š**

1. **å®Œæ•´ URLï¼š**
```
https://docs.google.com/spreadsheets/d/1uQvzsNIkaan67wFijnDiixusw9qNZnedW4Q3dWJASBM/edit?usp=sharing
```

2. **Sheet IDï¼š**
```
1uQvzsNIkaan67wFijnDiixusw9qNZnedW4Q3dWJASBM
```

3. **ç®€åŒ– URLï¼š**
```
docs.google.com/spreadsheets/d/1uQvzsNIkaan67wFijnDiixusw9qNZnedW4Q3dWJASBM
```

**ID æå–ï¼š**
- èŠ‚ç‚¹è‡ªåŠ¨ä» URL ä¸­æå– Sheet ID
- æ— éœ€æ‰‹åŠ¨å¤åˆ¶ ID

### worksheet_name å‚æ•°

**è¯´æ˜ï¼š** Google Sheets ä¸­çš„å·¥ä½œè¡¨åç§°

**ç¤ºä¾‹ï¼š**
- `Sheet1`ï¼ˆé»˜è®¤ï¼‰
- `Data`
- `Trading Records`
- `é…ç½®è¡¨`

### range å‚æ•°

**æ ¼å¼ï¼š** A1 notationï¼ˆå¦‚ `A1:Z1000`ï¼‰

**ç¤ºä¾‹ï¼š**
- `A1:Z1000` - è¯»å–å‰1000è¡Œï¼ŒAåˆ°Zåˆ—
- `A1:C100` - è¯»å–å‰100è¡Œï¼ŒAåˆ°Cåˆ—
- `B2:E50` - ä»B2å¼€å§‹åˆ°E50
- `A:C` - è¯»å–æ‰€æœ‰è¡Œï¼ŒAåˆ°Cåˆ—

### header_row å‚æ•°

**è¯´æ˜ï¼š** ç¬¬ä¸€è¡Œæ˜¯å¦ä¸ºè¡¨å¤´

**æ•ˆæœï¼š**
- `true`ï¼šç¬¬ä¸€è¡Œä½œä¸ºåˆ—åï¼Œæ•°æ®ä»ç¬¬äºŒè¡Œå¼€å§‹
- `false`ï¼šæ‰€æœ‰è¡Œéƒ½ä½œä¸ºæ•°æ®ï¼Œåˆ—åä½¿ç”¨é»˜è®¤ç¼–å·

---

## è¾“å‡ºå‚æ•°

### è¾“å‡ºåˆ—è¡¨

| è¾“å‡º ID | æ˜¾ç¤ºåç§° | æ•°æ®ç±»å‹ | è¯´æ˜ |
|---------|---------|---------|------|
| `data` | Data | object | è¯»å–çš„æ•°æ® |

### data è¾“å‡º

**æ•°æ®ç±»å‹ï¼š** `object`

**æ•°æ®ç»“æ„ï¼ˆheader_row=trueï¼‰ï¼š**

```typescript
{
  headers: string[];     // åˆ—åæ•°ç»„
  rows: Array<any[]>;    // æ•°æ®è¡Œæ•°ç»„
  row_count: number;     // æ•°æ®è¡Œæ•°
  column_count: number;  // åˆ—æ•°
}
```

**ç¤ºä¾‹è¾“å‡ºï¼š**

```json
{
  "headers": ["Date", "Symbol", "Price", "Volume"],
  "rows": [
    ["2024-01-15", "BTC", "45000", "1000"],
    ["2024-01-16", "ETH", "2500", "5000"],
    ["2024-01-17", "APT", "10", "10000"]
  ],
  "row_count": 3,
  "column_count": 4
}
```

**æ•°æ®ç»“æ„ï¼ˆheader_row=falseï¼‰ï¼š**

```json
{
  "headers": ["Column_0", "Column_1", "Column_2", "Column_3"],
  "rows": [
    ["Date", "Symbol", "Price", "Volume"],
    ["2024-01-15", "BTC", "45000", "1000"]
  ],
  "row_count": 2,
  "column_count": 4
}
```

---

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šè¯»å–ä»·æ ¼æ•°æ®

**åœºæ™¯ï¼š** ä» Google Sheets è¯»å–å†å²ä»·æ ¼æ•°æ®è¿›è¡Œåˆ†æã€‚

**Google Sheets å†…å®¹ï¼š**
```
| Date       | Symbol | Price | Volume |
|------------|--------|-------|--------|
| 2024-01-15 | BTC    | 45000 | 1000   |
| 2024-01-16 | ETH    | 2500  | 5000   |
```

**å·¥ä½œæµç»“æ„ï¼š**
```
Dataset Input Node (è¯»å–ä»·æ ¼æ•°æ®)
    â†“ data
Code Node (è®¡ç®—å‡ä»·å’Œè¶‹åŠ¿)
    â†“ analysis
AI Model Node (ç”Ÿæˆäº¤æ˜“å»ºè®®)
    â†“ recommendation
Buy/Sell Node (æ‰§è¡Œäº¤æ˜“)
```

**Dataset Input Node é…ç½®ï¼š**
```json
{
  "doc_link": "https://docs.google.com/spreadsheets/d/1uQvzsNIkaan.../edit",
  "worksheet_name": "Price Data",
  "header_row": true
}
```

---

### ç¤ºä¾‹ 2ï¼šåŠ è½½é…ç½®æ•°æ®

**åœºæ™¯ï¼š** ä» Google Sheets è¯»å–äº¤æ˜“ç­–ç•¥é…ç½®ã€‚

**Google Sheets å†…å®¹ï¼š**
```
| Strategy   | Buy_Threshold | Sell_Threshold | Max_Position |
|------------|---------------|----------------|--------------|
| Conservative | 0.02        | 0.05           | 10000        |
| Aggressive   | 0.05        | 0.10           | 50000        |
```

**å·¥ä½œæµç»“æ„ï¼š**
```
Dataset Input Node (è¯»å–ç­–ç•¥é…ç½®)
    â†“ data { strategies }
Code Node (é€‰æ‹©å½“å‰ç­–ç•¥)
    â†“ active_strategy
Condition Node (æ ¹æ®ç­–ç•¥å‚æ•°å†³ç­–)
    â†“
äº¤æ˜“èŠ‚ç‚¹
```

---

### ç¤ºä¾‹ 3ï¼šå›æµ‹å†å²æ•°æ®

**åœºæ™¯ï¼š** è¯»å–å†å²äº¤æ˜“è®°å½•è¿›è¡Œå›æµ‹åˆ†æã€‚

**å·¥ä½œæµç»“æ„ï¼š**
```
Dataset Input Node (å†å²äº¤æ˜“è®°å½•)
    â†“ data
Code Node (è®¡ç®—æ”¶ç›Šç‡)
    â†“ returns { total_return, sharpe_ratio }
AI Model Node (åˆ†ææ”¹è¿›ç‚¹)
    â†“ insights
Dataset Output Node (ä¿å­˜åˆ†æç»“æœ)
```

---

## Google Sheets é…ç½®

### 1. åˆ›å»º Service Account

1. è®¿é—® [Google Cloud Console](https://console.cloud.google.com/)
2. åˆ›å»ºæ–°é¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®
3. å¯ç”¨ **Google Sheets API**
4. åˆ›å»º **Service Account**
5. ä¸‹è½½ JSON å‡­è¯æ–‡ä»¶

### 2. å…±äº« Google Sheets

1. æ‰“å¼€æ‚¨çš„ Google Sheets
2. ç‚¹å‡»å³ä¸Šè§’çš„ã€Œå…±äº«ã€æŒ‰é’®
3. æ·»åŠ  Service Account é‚®ç®±åœ°å€
4. æˆäºˆã€ŒæŸ¥çœ‹è€…ã€æˆ–ã€Œç¼–è¾‘è€…ã€æƒé™

### 3. é…ç½®å‡­è¯

**æ–¹æ³•1 - ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰ï¼š**
```bash
export GOOGLE_CREDENTIALS_PATH="/path/to/credentials.json"
```

**æ–¹æ³•2 - é…ç½®æ–‡ä»¶ï¼š**
```python
# config.py
CONFIG = {
    "GOOGLE_CREDENTIALS_PATH": "credentials/google_sheets_credentials.json"
}
```

---

## æœ€ä½³å®è·µ

### 1. è¡¨å¤´è®¾è®¡

**âœ… æ¨èï¼š**
```
| date       | symbol | price  | volume  |  # å°å†™ï¼Œç®€æ´
| Date       | Symbol | Price  | Volume  |  # é¦–å­—æ¯å¤§å†™
```

**âŒ é¿å…ï¼š**
```
| æ—¥æœŸ | ä»£å¸ | ä»·æ ¼ | äº¤æ˜“é‡ |  # ä¸­æ–‡åˆ—åå¯èƒ½å¯¼è‡´é—®é¢˜
| Date (YYYY-MM-DD) | ... |  # è¿‡äºå†—é•¿
```

### 2. æ•°æ®èŒƒå›´

**æ ¹æ®æ•°æ®é‡é€‰æ‹©èŒƒå›´ï¼š**
- å°æ•°æ®é›†ï¼ˆ<100è¡Œï¼‰ï¼š`A1:Z1000`
- ä¸­ç­‰æ•°æ®é›†ï¼ˆ100-1000è¡Œï¼‰ï¼š`A1:Z5000`
- å¤§æ•°æ®é›†ï¼ˆ>1000è¡Œï¼‰ï¼šè€ƒè™‘åˆ†æ‰¹è¯»å–

### 3. æ•°æ®æ ¼å¼

**åœ¨ Google Sheets ä¸­ï¼š**
- æ—¥æœŸï¼šä½¿ç”¨ ISO æ ¼å¼ `YYYY-MM-DD`
- æ•°å­—ï¼šé¿å…ä½¿ç”¨é€—å·åˆ†éš”ç¬¦
- å¸ƒå°”å€¼ï¼šä½¿ç”¨ `TRUE`/`FALSE` æˆ– `1`/`0`
- ç©ºå€¼ï¼šç•™ç©ºï¼Œä¸è¦ä½¿ç”¨ `null` æˆ– `N/A`

---

## æ³¨æ„äº‹é¡¹

### âš ï¸ é‡è¦æç¤º

1. **Google API é…é¢**
   - æ¯å¤©æœ‰è¯»å–æ¬¡æ•°é™åˆ¶
   - é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹è¯»å–
   - è€ƒè™‘ç¼“å­˜æ•°æ®

2. **å‡­è¯æ–‡ä»¶å®‰å…¨**
   - ä¸è¦å°†å‡­è¯æ–‡ä»¶æäº¤åˆ° Git
   - ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®è·¯å¾„
   - é™åˆ¶ Service Account æƒé™

3. **æ•°æ®ç±»å‹**
   - æ‰€æœ‰æ•°æ®è¯»å–ä¸ºå­—ç¬¦ä¸²
   - éœ€è¦åœ¨ Code Node ä¸­è¿›è¡Œç±»å‹è½¬æ¢
   - æ•°å­—ã€æ—¥æœŸç­‰éœ€è¦æ˜¾å¼è½¬æ¢

4. **è¡¨å¤´è¡Œ**
   - ç¡®ä¿ `header_row` è®¾ç½®æ­£ç¡®
   - è¡¨å¤´è¡Œä¸ä¼šå‡ºç°åœ¨ `rows` æ•°ç»„ä¸­
   - è¡¨å¤´å°†ç”¨ä½œåˆ—å

5. **å·¥ä½œè¡¨åç§°**
   - åŒºåˆ†å¤§å°å†™
   - åŒ…å«ç©ºæ ¼éœ€è¦å®Œæ•´åŒ¹é…
   - é»˜è®¤è¯»å– `Sheet1`

---

## æ•…éšœæ’æŸ¥

**Q: æç¤º "Google Sheets credentials file not found"ï¼Ÿ**

A:
1. ç¡®è®¤å‡­è¯æ–‡ä»¶è·¯å¾„æ­£ç¡®
2. æ£€æŸ¥ç¯å¢ƒå˜é‡ `GOOGLE_CREDENTIALS_PATH`
3. ç¡®ä¿å‡­è¯æ–‡ä»¶å¯è¯»

---

**Q: æç¤º "Spreadsheet not found"ï¼Ÿ**

A:
1. ç¡®è®¤ Sheet ID æ­£ç¡®
2. æ£€æŸ¥ Service Account æ˜¯å¦æœ‰è®¿é—®æƒé™
3. ç¡®è®¤ Google Sheets å·²å…±äº«

---

**Q: è¯»å–çš„æ•°æ®ä¸ºç©ºï¼Ÿ**

A:
1. æ£€æŸ¥ `range` å‚æ•°æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤å·¥ä½œè¡¨ä¸­æœ‰æ•°æ®
3. æ£€æŸ¥ `worksheet_name` æ˜¯å¦åŒ¹é…
4. ç¡®è®¤æ•°æ®åœ¨æŒ‡å®šèŒƒå›´å†…

---

**Q: åˆ—åæ˜¾ç¤ºä¸º Column_0, Column_1ï¼Ÿ**

A:
1. è®¾ç½® `header_row: true`
2. ç¡®è®¤ç¬¬ä¸€è¡ŒåŒ…å«åˆ—å
3. æ£€æŸ¥è¡¨æ ¼æ ¼å¼

---

## æŠ€æœ¯è§„æ ¼

| è§„æ ¼é¡¹ | å€¼ |
|--------|-----|
| **èŠ‚ç‚¹ç‰ˆæœ¬** | 0.0.2 |
| **èŠ‚ç‚¹ç±»åˆ«** | Instance Node |
| **åŸºç±»èŠ‚ç‚¹** | `dataset_node` |
| **æ•°æ®æº** | Google Sheets |
| **API** | Google Sheets API v4 |
| **å‡­è¯ç±»å‹** | Service Account |
| **è¶…æ—¶æ—¶é—´** | 60ç§’ |

---

## ç›¸å…³èŠ‚ç‚¹

- **Dataset Output Node** - å†™å…¥æ•°æ®åˆ° Google Sheets
- **Code Node** - å¤„ç†è¯»å–çš„æ•°æ®
- **AI Model Node** - åˆ†ææ•°æ®é›†
- **Condition Node** - åŸºäºæ•°æ®åšå†³ç­–

---

**ç›¸å…³æ–‡æ¡£ï¼š**
- [èŠ‚ç‚¹ä¸å·¥ä½œæµ](../core-concepts/nodes-and-workflows.md) - èŠ‚ç‚¹åŸºç¡€æ¦‚å¿µ
- [Code Node](code-node.md) - æ•°æ®å¤„ç†èŠ‚ç‚¹
- [Weather è¯­æ³•](../core-concepts/weather-syntax.md) - å·¥ä½œæµæ–‡ä»¶æ ¼å¼
